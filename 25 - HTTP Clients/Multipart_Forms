## ğŸ“¦ Táº¡o Multipart Form trong Go

Go há»— trá»£ viá»‡c táº¡o vÃ  gá»­i multipart/form-data (thÆ°á»ng dÃ¹ng trong form upload file) thÃ´ng qua gÃ³i `mime/multipart`. DÆ°á»›i Ä‘Ã¢y lÃ  mÃ´ táº£ chi tiáº¿t cÃ¡c hÃ m vÃ  cÃ¡ch sá»­ dá»¥ng chÃºng.

---

### ğŸ“Œ CÃ¡c hÃ m táº¡o multipart form

#### 1. `CreateFormField(fieldname string) (io.Writer, error)`

* âœ… Táº¡o má»™t **trÆ°á»ng dá»¯ liá»‡u bÃ¬nh thÆ°á»ng (text field)** trong multipart form.
* ğŸ§  DÃ¹ng khi báº¡n muá»‘n gá»­i dá»¯ liá»‡u nhÆ° tÃªn, email, v.v.

**VÃ­ dá»¥:**

```go
fieldWriter, _ := writer.CreateFormField("username")
fieldWriter.Write([]byte("namdev"))
```

Hoáº·c ngáº¯n gá»n hÆ¡n:

```go
writer.WriteField("username", "namdev")
```

---

#### 2. `CreateFormFile(fieldname, filename string) (io.Writer, error)`

* âœ… Táº¡o **trÆ°á»ng dáº¡ng file** (vÃ­ dá»¥ upload áº£nh, PDF,...).
* ğŸ“„ `fieldname`: tÃªn form field.
* ğŸ–¼ï¸ `filename`: tÃªn file hiá»ƒn thá»‹ khi upload.

**VÃ­ dá»¥:**

```go
part, _ := writer.CreateFormFile("avatar", "profile.jpg")
io.Copy(part, file)
```

---

#### 3. `FormDataContentType() string`

* âœ… Tráº£ vá» giÃ¡ trá»‹ `Content-Type` phÃ¹ há»£p vá»›i multipart form, bao gá»“m cáº£ thÃ´ng tin `boundary`.

**VÃ­ dá»¥:**

```go
req.Header.Set("Content-Type", writer.FormDataContentType())
```

---

#### 4. `Close() error`

* âœ… Káº¿t thÃºc form, ghi "boundary Ä‘Ã³ng" vÃ o cuá»‘i dá»¯ liá»‡u form.
* Báº¯t buá»™c pháº£i gá»i trÆ°á»›c khi gá»­i request.

**VÃ­ dá»¥:**

```go
writer.Close()
```

---

### ğŸ” VÃ­ dá»¥ tá»•ng quÃ¡t táº¡o vÃ  gá»­i multipart form

```go
body := &bytes.Buffer{}
writer := multipart.NewWriter(body)

// ThÃªm field text
writer.WriteField("username", "namdev")

// ThÃªm file
file, _ := os.Open("file.txt")
defer file.Close()
part, _ := writer.CreateFormFile("resume", "file.txt")
io.Copy(part, file)

// Káº¿t thÃºc form
writer.Close()

// Gá»­i request
req, _ := http.NewRequest("POST", "http://localhost:5000/upload", body)
req.Header.Set("Content-Type", writer.FormDataContentType())

http.DefaultClient.Do(req)
```

---

### ğŸ’¡ Ghi nhá»›:

* Multipart form ráº¥t há»¯u Ã­ch khi cáº§n gá»­i dá»¯ liá»‡u kÃ¨m file.
* Äá»«ng quÃªn gá»i `Close()` trÆ°á»›c khi gá»­i request.
* `FormDataContentType()` luÃ´n pháº£i Ä‘Æ°á»£c set vÃ o Header Ä‘á»ƒ server hiá»ƒu cÃ¡ch Ä‘á»c dá»¯ liá»‡u gá»­i lÃªn.
